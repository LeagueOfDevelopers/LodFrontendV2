!function(){var a=window.console=window.console||{};a.log||(a.log=function(){})}(),function(a){"use strict";a.ajaxUpload||(a.ajaxUploadSettings={onprogress:function(a){console.log("Ajax Upload progress")},onabort:function(a){console.log("Ajax Upload abort")},onerror:function(a){console.log("Ajax Upload error"),console.log(a)},onload:function(a){console.log("Ajax Upload load")},name:"uploads[]"},a.ajaxUploadSerializeFiles=function(t){for(var o=[],e=a(t).attr("name"),n=0,r=t.files.length;n<r;n++)o.push({name:e,value:t.files[n]});return o},a.ajaxUploadToFormData=function(a,t){for(var o=t||new FormData,e=0,n=a.length;e<n;e++)o.append(a[e].name,a[e].value);return o},a.ajaxUploadExtractData=function(t,o){if(!t||t instanceof FormData)return t;var e=a.ajaxUploadExtractData(o)||new FormData;if("string"==typeof t||t instanceof jQuery){var n=[];a(t).each(function(t,o){a.merge(n,a.ajaxUploadSerializeFiles(this))}),t=n}else if(t instanceof FileList){n=[];for(var r=0,i=t.length;r<i;r++)n.push({name:a.ajaxUploadSettings.name,value:t[r]});t=n}else if("object"==typeof t&&!a.isArray(t)){var l=[];for(var p in t)l.push({name:p,value:t[p]});t=l}return a.ajaxUploadToFormData(t,e)},a.ajaxUpload=function(t){var o=jQuery.extend(!0,{},a.ajaxUploadSettings,t),e=a.ajaxUploadExtractData(o.data);o.data=null;var n={processData:!1,type:"POST",beforeSend:function(a,o){o.xhr=function(){var a=new window.XMLHttpRequest;return a.upload.onprogress=o.onprogress.bind(this),a.upload.onabort=o.onabort.bind(this),a.upload.onerror=o.onerror.bind(this),a.upload.onload=o.onload.bind(this),a},o.data=e,t.beforeSend&&t.beforeSend.call(this,a,o)}};return(o=jQuery.extend(!0,{},o,n)).contentType&&delete o.contentType,a.ajax(o)},a.fn.ajaxUpload=function(t){return this.each(function(){var o=jQuery.extend(!0,{},t),e=a(this).serializeArray();a("input:file",this).each(function(t,o){a.merge(e,a.ajaxUploadSerializeFiles(this))}),o.data=a.ajaxUploadExtractData(e,o.data),a.ajaxUpload(o)})},a.ajaxUploadPost=function(t,o,e,n){return jQuery.isFunction(o)&&(n=n||e,e=o,o={}),a.ajaxUpload({type:"POST",url:t,data:o,success:e,dataType:n})},a.ajaxUploadPrompt=function(t){var o=a.Deferred(),e={success:function(){t.success&&t.success.apply(this,arguments),i.remove()}},n=jQuery.extend(!0,{},t,e),r="ajaxupload"+Date.now(),i=a('<form method="post" enctype="multipart/form-data" />').appendTo("body");i.attr("action",n.url),i.attr("target",r),i.css({position:"relative",top:-1e3,left:-1e3,opacity:0}),i.submit(function(){});var l=a('<input type="file" />').appendTo(i);return l.attr("name",a.ajaxUploadSettings.name),t.accept&&l.attr("accept",t.accept),t.multiple&&l.attr("multiple","multiple"),l.change(function(){if(!this.files.length)return!1;n.data||(n.data={}),n.files=this.files,n.data=a.ajaxUploadExtractData(n.data,a.ajaxUploadSerializeFiles(this)),a.ajaxUpload(n).promise(o)}),l.click(),o},a.fn.ajaxUploadPrompt=function(t){return this.click(function(){a(this).trigger("ajaxUploadPrompt",a.ajaxUploadPrompt(t))})},a.fn.ajaxUploadDrop=function(t){return this.each(function(){var o=a(this);o.on("dragenter.ajaxUpload",function(a){a.stopPropagation(),a.preventDefault(),o.addClass("dragover")}).on("dragover.ajaxUpload",function(a){a.stopPropagation(),a.preventDefault(),o.addClass("dragover")}).on("dragleave.ajaxUpload",function(a){o.removeClass("dragover")}).on("drop.ajaxUpload",function(e){e.stopPropagation(),e.preventDefault();var n=e.originalEvent.dataTransfer.files,r=jQuery.extend(!0,{},t);r.data=a.ajaxUploadExtractData(n,r.data),r.files=n,o.trigger("ajaxUploadDrop",a.ajaxUpload(r)),o.removeClass("dragover")})})})}(jQuery);